# Visual Guide: Farcaster Follower Cronjob System

## ğŸ¯ System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Your Application                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
                â–¼             â–¼             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Cronjob      â”‚ â”‚ API      â”‚ â”‚ Shutdown     â”‚
        â”‚ (5 min)      â”‚ â”‚ Handler  â”‚ â”‚ Handler      â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚              â”‚
               â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Redis Cache            â”‚
        â”‚  (Followers Set + Sync)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Cronjob Execution Flow

```
Every 5 Minutes:

START
  â”‚
  â”œâ”€â†’ Get TARGET_FIDS from .env
  â”‚   (e.g., "1093215,1093216")
  â”‚
  â”œâ”€â†’ For each FID:
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Clear old followers cache
  â”‚   â”‚   (DEL farcaster:followers:{FID})
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Initialize cursor = ""
  â”‚   â”‚
  â”‚   â””â”€â†’ Loop until no more pages:
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Build API URL with cursor
  â”‚       â”‚   https://client.farcaster.xyz/v2/followers?fid={FID}&cursor={cursor}
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Make HTTP request with Bearer token
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Parse JSON response
  â”‚       â”‚   {
  â”‚       â”‚     "result": {
  â”‚       â”‚       "users": [
  â”‚       â”‚         {"fid": 1406368},
  â”‚       â”‚         {"fid": 466033},
  â”‚       â”‚         ...
  â”‚       â”‚       ]
  â”‚       â”‚     },
  â”‚       â”‚     "next": {"cursor": "..."}
  â”‚       â”‚   }
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Extract FIDs from response
  â”‚       â”‚   [1406368, 466033, 1108383, ...]
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Add FIDs to Redis Set
  â”‚       â”‚   SADD farcaster:followers:{FID} 1406368 466033 1108383 ...
  â”‚       â”‚
  â”‚       â”œâ”€â†’ Wait 500ms (rate limiting)
  â”‚       â”‚
  â”‚       â””â”€â†’ If cursor exists, repeat; else break
  â”‚
  â”‚   â”œâ”€â†’ Update last sync time
  â”‚   â”‚   SET farcaster:sync:last:{FID} {timestamp}
  â”‚   â”‚
  â”‚   â””â”€â†’ Log completion
  â”‚       "Successfully fetched and cached X followers for FID: {FID}"
  â”‚
  â””â”€â†’ END (wait 5 minutes, repeat)
```

## ğŸŒ API Request Flow

```
User Request:
POST /api/v1/social-action
{
  "social": "farcaster",
  "action": "follow",
  "iduser": "1406368"
}
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SocialHandler.SocialAction()          â”‚
â”‚ - Parse JSON request                 â”‚
â”‚ - Validate required fields           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SocialChecker.CheckSocialAction()     â”‚
â”‚ - Check social platform (farcaster)  â”‚
â”‚ - Check action (follow)              â”‚
â”‚ - Call farcaster.CheckFollow()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ farcaster.CheckFollow(userID)         â”‚
â”‚ - Parse userID to int64              â”‚
â”‚ - Get TARGET_FID from env            â”‚
â”‚ - Query Redis                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redis Query                          â”‚
â”‚ SISMEMBER farcaster:followers:1093215â”‚
â”‚           1406368                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
        â–¼                 â–¼
    Found (1)         Not Found (0)
        â”‚                 â”‚
        â–¼                 â–¼
    return true       return false
        â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        Response to User
        (< 1ms response time)
```

## ğŸ“Š Redis Data Structure

```
Redis Database:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: farcaster:followers:1093215                    â”‚
â”‚ Type: Set                                           â”‚
â”‚ Members:                                            â”‚
â”‚  â”œâ”€ 1406368                                         â”‚
â”‚  â”œâ”€ 466033                                          â”‚
â”‚  â”œâ”€ 1108383                                         â”‚
â”‚  â”œâ”€ 1290249                                         â”‚
â”‚  â”œâ”€ 1513624                                         â”‚
â”‚  â”œâ”€ 887591                                          â”‚
â”‚  â”œâ”€ 1439084                                         â”‚
â”‚  â”œâ”€ 1425281                                         â”‚
â”‚  â”œâ”€ 542170                                          â”‚
â”‚  â”œâ”€ 1093729                                         â”‚
â”‚  â””â”€ ... (more FIDs)                                 â”‚
â”‚                                                     â”‚
â”‚ Operations:                                         â”‚
â”‚  SADD key member [member ...]                       â”‚
â”‚  SISMEMBER key member                               â”‚
â”‚  SCARD key                                          â”‚
â”‚  SMEMBERS key                                       â”‚
â”‚  DEL key                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: farcaster:sync:last:1093215                    â”‚
â”‚ Type: String                                        â”‚
â”‚ Value: 1732605965 (Unix timestamp)                  â”‚
â”‚                                                     â”‚
â”‚ Operations:                                         â”‚
â”‚  SET key value                                      â”‚
â”‚  GET key                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## â±ï¸ Timeline: First Run

```
Time    Event
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
00:00   Application starts
        â”‚
        â”œâ”€â†’ Load .env
        â”œâ”€â†’ Connect to Redis
        â”œâ”€â†’ Initialize cronjob
        â”œâ”€â†’ Start HTTP server
        â”‚
00:05   Cronjob triggers (first run)
        â”‚
        â”œâ”€â†’ Fetch page 1 (15 followers)
        â”œâ”€â†’ Store in Redis
        â”œâ”€â†’ Wait 500ms
        â”‚
        â”œâ”€â†’ Fetch page 2 (15 followers)
        â”œâ”€â†’ Store in Redis
        â”œâ”€â†’ Wait 500ms
        â”‚
        â”œâ”€â†’ ... continue pagination ...
        â”‚
        â””â”€â†’ Complete (e.g., 150 followers cached)
        
00:10   API ready to use
        â”‚
        â””â”€â†’ All requests use Redis cache
        
05:00   Cronjob triggers (second run)
        â”‚
        â””â”€â†’ Refresh cache with latest followers
        
10:00   Cronjob triggers (third run)
        â”‚
        â””â”€â†’ Refresh cache
        
... continues every 5 minutes ...
```

## ğŸ”Œ Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        main.go                               â”‚
â”‚  - Initialize Redis                                          â”‚
â”‚  - Initialize Cronjob                                        â”‚
â”‚  - Setup Gin Router                                          â”‚
â”‚  - Handle Signals                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                    â”‚                    â”‚
              â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ pkg/cache/       â”‚ â”‚ pkg/cronjob/     â”‚ â”‚ internal/handler/â”‚
    â”‚ redis.go         â”‚ â”‚ scheduler.go     â”‚ â”‚ social.go        â”‚
    â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚
    â”‚ - Connect Redis  â”‚ â”‚ - Schedule cron  â”‚ â”‚ - Handle POST    â”‚
    â”‚ - Add FIDs       â”‚ â”‚ - Run every 5min â”‚ â”‚ - Parse JSON     â”‚
    â”‚ - Check FID      â”‚ â”‚ - Call fetcher   â”‚ â”‚ - Call service   â”‚
    â”‚ - Clear cache    â”‚ â”‚                  â”‚ â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚
             â”‚                    â–¼
             â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚          â”‚ farcaster/           â”‚
             â”‚          â”‚ follower_fetcher.go  â”‚
             â”‚          â”‚                      â”‚
             â”‚          â”‚ - Fetch from API     â”‚
             â”‚          â”‚ - Handle pagination  â”‚
             â”‚          â”‚ - Rate limiting      â”‚
             â”‚          â”‚ - Call cache         â”‚
             â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚   Redis Database     â”‚
             â”‚                      â”‚
             â”‚ Sets: followers      â”‚
             â”‚ Strings: sync_time   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Compose                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Redis Service     â”‚      â”‚   Application Service    â”‚ â”‚
â”‚  â”‚                     â”‚      â”‚                          â”‚ â”‚
â”‚  â”‚ - Image: redis:7    â”‚      â”‚ - Build: ./Dockerfile   â”‚ â”‚
â”‚  â”‚ - Port: 6379        â”‚      â”‚ - Port: 8080             â”‚ â”‚
â”‚  â”‚ - Volume: redis_dataâ”‚      â”‚ - Env: .env              â”‚ â”‚
â”‚  â”‚ - Health: ping      â”‚      â”‚ - Depends: redis         â”‚ â”‚
â”‚  â”‚                     â”‚      â”‚                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                            â”‚                 â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                    â”‚  Network Bridge    â”‚                 â”‚
â”‚                    â”‚  (redis:6379)      â”‚                 â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[object Object]

```
BEFORE (Old Implementation):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Request                                             â”‚
â”‚  â”œâ”€â†’ HTTP to Farcaster API (500ms)                     â”‚
â”‚  â”œâ”€â†’ Paginate through followers (1-5 sec)             â”‚
â”‚  â”œâ”€â†’ Check if user in list (100ms)                    â”‚
â”‚  â””â”€â†’ Response (1-5 seconds) â±ï¸                         â”‚
â”‚                                                         â”‚
â”‚ Issues:                                                 â”‚
â”‚  âŒ Slow response                                       â”‚
â”‚  âŒ Rate limiting                                       â”‚
â”‚  âŒ Repeated API calls                                 â”‚
â”‚  âŒ High API usage                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER (New Implementation):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Request                                             â”‚
â”‚  â”œâ”€â†’ Query Redis (< 1ms)                              â”‚
â”‚  â””â”€â†’ Response (< 1ms) âš¡                               â”‚
â”‚                                                         â”‚
â”‚ Cronjob (Every 5 minutes):                             â”‚
â”‚  â”œâ”€â†’ Fetch from API (1-5 min)                         â”‚
â”‚  â”œâ”€â†’ Store in Redis                                   â”‚
â”‚  â””â”€â†’ Update timestamp                                 â”‚
â”‚                                                         â”‚
â”‚ Benefits:                                               â”‚
â”‚  âœ… Fast response (1000x faster)                       â”‚
â”‚  âœ… No rate limiting                                   â”‚
â”‚  âœ… Reduced API calls (99.9% reduction)               â”‚
â”‚  âœ… Efficient caching                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Monitoring Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  System Status                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ Redis Connection:        âœ… Connected                   â”‚
â”‚ Cronjob Status:          âœ… Running (next: 5:00)       â”‚
â”‚ Last Sync:               âœ… 2 minutes ago              â”‚
â”‚ Followers Cached:        âœ… 150 followers              â”‚
â”‚ API Response Time:       âœ… 0.8ms                      â”‚
â”‚ Memory Usage:            âœ… 12KB                       â”‚
â”‚ Error Rate:              âœ… 0%                         â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Recent Activity:                                        â”‚
â”‚                                                         â”‚
â”‚ 14:35 - Cronjob completed (150 followers)             â”‚
â”‚ 14:35 - Updated sync timestamp                        â”‚
â”‚ 14:34 - API request: user 1406368 â†’ true             â”‚
â”‚ 14:33 - API request: user 9999999 â†’ false            â”‚
â”‚ 14:32 - API request: user 466033 â†’ true              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Decision Tree: Troubleshooting

```
API Response Slow?
â”œâ”€â†’ Check Redis connection
â”‚   â”œâ”€â†’ redis-cli ping
â”‚   â””â”€â†’ If fails â†’ Start Redis
â”‚
â”œâ”€â†’ Check if cache populated
â”‚   â”œâ”€â†’ redis-cli SCARD farcaster:followers:1093215
â”‚   â””â”€â†’ If 0 â†’ Wait for cronjob (5 min max)
â”‚
â””â”€â†’ Check application logs
    â””â”€â†’ docker-compose logs -f app

Cronjob Not Running?
â”œâ”€â†’ Check TARGET_FIDS in .env
â”‚   â””â”€â†’ If empty â†’ Add TARGET_FIDS=1093215
â”‚
â”œâ”€â†’ Check application logs
â”‚   â””â”€â†’ Look for "Cronjob scheduler started"
â”‚
â””â”€â†’ Check Redis connection
    â””â”€â†’ redis-cli ping

API Returns Error?
â”œâ”€â†’ Check request format
â”‚   â””â”€â†’ Must have: social, action, iduser
â”‚
â”œâ”€â†’ Check userID format
â”‚   â””â”€â†’ Must be valid integer
â”‚
â””â”€â†’ Check application logs
    â””â”€â†’ Look for error messages
```

---

This visual guide helps understand the system flow, data structures, and interactions at a glance.

